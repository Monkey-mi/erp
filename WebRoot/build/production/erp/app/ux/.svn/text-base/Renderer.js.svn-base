Ext.onReady(function(){Ext.monetaryText="万";Ext.monetaryUnit=10000;Ext.monetary=null;Ext.monetaryPosition="behindnumber";if(Ext.util&&Ext.util.Format){Ext.apply(Ext.util.Format,{monetaryRenderer:function(o,j,m,n,l,k,i){if(o){if(Ext.monetaryUnit&&Ext.monetaryUnit!=1){o=o/Ext.monetaryUnit}return Ext.util.Format.number(o,"0,000.00")+Ext.monetaryText}else{return""}},dateRendererOne:function(o,j,m,n,l,k,i){if(j!=null){}return Ext.util.Format.date(o,"Y-m-d")},floatRenderer:function(o,j,m,n,l,k,i){return o==0?"":Ext.util.Format.number(o,"0,000.######")},floatRendererOne:function(o,j,m,n,l,k,i){return o==0?"":Ext.util.Format.number(o,"0,000.00")},intRenderer:function(o,j,m,n,l,k,i){return o==0?"":o},percentRenderer:function(j,i,k){j=j*100;var m=j>100?100:j;m=m<0?0:m;var l=parseInt(m*2.55).toString(16);if(l.length==1){l="0"+l}return Ext.String.format('<div><div style="float:left;border:1px solid #008000;height:15px;width:100%;"><div style="float:left;text-align:center;width:100%;color:blue;">{0}%</div><div style="background: #FAB2{2};width:{1}%;height:13px;"></div></div></div>',j,m,l)},nameFieldRenderer:function(o,j,m,n,l,k,i){j.style="font-weight:bold;";return o}})}Ext.toastInfo=function(k,i){var j={title:"提示信息",html:k,border:true,saveDelay:10,align:"tr",closable:true,minWidth:200,useXAxis:false,slideInDuration:800,slideBackDuration:1500,iconCls:"ux-notification-icon-smile",autoCloseDelay:4000,slideInAnimation:"elasticIn",slideBackAnimation:"elasticIn"};Ext.Msg.alert("提示",k)};Ext.toastWarn=function(k,i){var j={title:"警告信息",html:k,border:true,saveDelay:10,align:"tr",closable:true,minWidth:200,useXAxis:false,slideInDuration:800,slideBackDuration:1500,iconCls:"ux-notification-icon-warn",autoCloseDelay:4000,slideInAnimation:"elasticIn",slideBackAnimation:"elasticIn"};Ext.Msg.alert("提示",k)};Ext.toastErrorInfo=function(k,i){var j={title:"错误信息",html:k,header:{border:1,style:{borderColor:"red"}},border:true,style:{borderColor:"red"},saveDelay:10,align:"tr",closable:true,minWidth:200,useXAxis:false,slideInDuration:800,slideBackDuration:1500,iconCls:"ux-notification-icon-error",autoCloseDelay:5000,slideInAnimation:"elasticIn",slideBackAnimation:"elasticIn"};Ext.Msg.alert("提示",k)};var b=Ext.ClassManager,d=Ext.Function.bind(b.get,b);Ext.override(Ext.panel.Panel,{collapseMode:"mini",collapseToolText:"隐藏",expandToolText:"展开"});Ext.override(Ext.tree.Panel,{collapseMode:"mini",collapseToolText:"隐藏",expandToolText:"展开"});if(d("Ext.util.Format")){Ext.util.Format.dateFormat="Y年m月d日"}var g="Y-m-d H:i:s";if(Ext.data.Field){Ext.apply(Ext.data.Field.prototype,{dateFormat:g})}Ext.JSON.encodeDate=function(i){return Ext.Date.format(i,'"Y-m-d H:i:s"')};if(Ext.grid.RowEditor){Ext.apply(Ext.grid.RowEditor.prototype,{saveBtnText:"保存",cancelBtnText:"取消",errorsText:"提示信息",dirtyText:"已修改,你需要提交或取消变更"})}if(Ext.Object){Ext.apply(Ext.Object,{toQueryObjects:function(l,p,k){var j=Ext.Object.toQueryObjects,o=[],m,n;if(Ext.isArray(p)){for(m=0,n=p.length;m<n;m++){if(k){o=o.concat(j(l+"["+m+"]",p[m],true))}else{if(Ext.isDate(p)){p=Ext.Date.format(p,g)}o.push({name:l,value:p[m]})}}}else{if(Ext.isObject(p)){for(m in p){if(p.hasOwnProperty(m)){if(k){o=o.concat(j(l+"["+m+"]",p[m],true))}else{if(Ext.isDate(p)){p=Ext.Date.format(p,g)}o.push({name:l,value:p[m]})}}}}else{if(Ext.isDate(p)){p=Ext.Date.format(p,g)}o.push({name:l,value:p})}}return o}})}Ext.apply(Ext.form.field.VTypes,{password:function(k,j){if(j.initialPassField){var i=j.up("form").down("#"+j.initialPassField);return(k==i.getValue())}return true},passwordText:"两次密码输入不相符!",samepassword:function(k,j){if(j.oldPassField){var i=j.up("form").down("#"+j.oldPassField);return(k!=i.getValue())}return true},samepasswordText:"当前输入密码不能同原始密码一致!",comboEqZero:function(j,i){return j!=0||j==""},comboEqZeroText:"请选择对应栏位!"});if(Ext.grid.column.CheckColumn){Ext.override(Ext.grid.column.CheckColumn,{processEvent:function(n,p,t,j,o,l,k,u){var m=this,s=n==="keydown"&&l.getKey(),i=n=="mousedown";if(!m.disabled&&(i||(s==l.ENTER||s==l.SPACE))){var q=m.dataIndex,r=!k.get(q);if(m.fireEvent("beforecheckchange",m,j,r,k)!==false){k.set(q,r);m.fireEvent("checkchange",m,j,r,k);if(i){l.stopEvent()}if(!m.stopSelection){p.selModel.selectByPosition({row:j,column:o})}return false}else{return !m.stopSelection}}else{return m.callParent(arguments)}}})}document.onkeypress=h;document.onkeydown=h;if(document.layers){document.captureEvents(Event.MOUSEDOWN)}document.onmousedown=c;document.oncontextmenu=new Function("return false;");var f="关于";String.prototype.startWith=function(j){var i=new RegExp("^"+j);return i.test(this)};String.prototype.endWith=function(j){var i=new RegExp(j+"$");return i.test(this)};String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};String.prototype.trimLeft=function(){return this.replace(/(^[\\s]*)/g,"")};String.prototype.trimRight=function(){return this.replace(/([\\s]*$)/g,"")};String.prototype.chnLength=function(){return this.replace(/[^\x00-\xff]/g,"**").length};String.prototype.replaceAll=function(j,i){return this.replace(new RegExp(j,"gm"),i)};function h(p){var m=p||window.event;var o=m.target||m.srcElement;var l=o.type||o.getAttribute("type");var n=o.readOnly;var k=o.disabled;n=(n==undefined)?false:n;k=(k==undefined)?true:k;var j=m.keyCode==8&&(l=="password"||l=="text"||l=="textarea")&&(n==true||k==true);var i=m.keyCode==8&&l!="password"&&l!="text"&&l!="textarea";if(i||j){return false}}function c(j){j=j||event;if(j.button==2){var i=j.srcElement||j.target;if(i.type=="text"||i.type=="textarea"||i.type=="password"){document.oncontextmenu=new Function("return true;")}else{document.oncontextmenu=new Function("return false;")}}}function a(j){if(tp.Const.mainController){var i=tp.Const.mainController.getContentTab().items.getCount();if(i>1){var k="您还有"+(i-1)+"个应用未关闭,可能丢失未保存的数据。";return k}}}function e(i){if(tp.Util.leaveMode){Ext.Ajax.request({url:"main/Users/doLogout.do",async:false,params:{login_id:tp.Util.currentUser.loginId},method:"POST"})}}});